<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 게시판 처리 SQL -->
<mapper namespace="com.scit.flee2.dao.BoardMapper">
	<insert id="insertProposal" parameterType="Proposal">
	INSERT INTO WOW_PROPOSAL
	<if test="membertype=='셀러'">
	(PROPOSALNUM, ID, TITLE, INDATE, MEMBERTYPE, KEYWORD, COMMENTS, NAME, TYPE1, TYPE2, TYPE3, PRICE, STOCK)
	VALUES
	(WOW_PROPOSAL_SEQ.NEXTVAL, #{id}, #{title}, #{image}, SYSDATE, #{membertype}, #{keyword}, #{comments}, #{name}, #{type1}, #{type2}, #{type3}, #{price}, #{stock})
	</if>
	<if test="membertype=='공간제공자'">
	(PROPOSALNUM, ID, TITLE, IMAGE, INDATE, MEMBERTYPE, KEYWORD, COMMENTS, NAME, TYPE1, TYPE2, TYPE3, SPACEADDR1, SPACEADDR2, LATITUDE, LONGITUDE)
	VALUES
	(WOW_PROPOSAL_SEQ.NEXTVAL, #{id}, #{title}, #{image}, SYSDATE, #{membertype}, #{keyword}, #{comments}, #{name}, #{type1}, #{type2}, #{type3},  #{spaceaddr1}, #{spaceaddr2}, #{latitude}, #{longitude})
	</if>
	</insert>
	
	<select id="listProposal" parameterType="Member" resultType="Proposal">
	SELECT
	PROPOSALNUM, ID, TITLE, TO_CHAR(INDATE,'YYYY-MM-DD') AS INDATE, MEMBERTYPE, KEYWORD, COMMENTS, NAME, TYPE1, TYPE2, TYPE3, PRICE, STOCK, SPACEADDR1, SPACEADDR2, LATITUDE, LONGITUDE
	FROM WOW_PROPOSAL
	WHERE ID=#{id}
	ORDER BY PROPOSALNUM DESC
	</select>
	
	<select id="selectProposal" parameterType="Integer" resultType="Proposal">
	SELECT
	PROPOSALNUM, ID, TITLE, TO_CHAR(INDATE,'YYYY-MM-DD') AS INDATE, MEMBERTYPE, KEYWORD, COMMENTS, NAME, TYPE1, TYPE2, TYPE3, PRICE, STOCK, SPACEADDR1, SPACEADDR2, LATITUDE, LONGITUDE
	FROM WOW_PROPOSAL
	WHERE PROPOSALNUM=#{clickNo}
	</select>

	<delete id="deleteProposal" parameterType="Integer">
	DELETE
	FROM WOW_PROPOSAL
	WHERE PROPOSALNUM=#{clickNo}
	</delete>
	
	<select id="listRecommendSeller" resultType="Board">
	SELECT
	*
	FROM WOW_BOARD
	WHERE RECOMMEND='1'
	</select>
	
	<insert id="insertBoard" parameterType="Board">
	INSERT INTO WOW_BOARD
	<if test="membertype=='셀러'">
	(BOARDNUM, ID, TITLE, IMAGE, INDATE, MEMBERTYPE, KEYWORD, COMMENTS, PRECAUTION, NAME, TYPE1, TYPE2, TYPE3, PRICE, STOCK)
	VALUES
	(WOW_BOARD_SEQ.NEXTVAL, #{id}, #{title}, #{image}, SYSDATE, #{membertype}, #{keyword}, #{comments}, #{precaution}, #{name}, #{type1}, #{type2}, #{type3}, #{price}, #{stock})
	</if>
	<if test="membertype=='공간제공자'">
	(BOARDNUM, ID, TITLE, IMAGE, INDATE, MEMBERTYPE, KEYWORD, COMMENTS, PRECAUTION, NAME, TYPE1, TYPE2, TYPE3, OPTIME, OFFDAY, SCALE, SPACEADDR1, SPACEADDR2, LATITUDE, LONGITUDE)
	VALUES
	(WOW_BOARD_SEQ.NEXTVAL, #{id}, #{title}, #{image}, SYSDATE, #{membertype}, #{keyword}, #{comments}, #{precaution}, #{name}, #{type1}, #{type2}, #{type3}, #{optime}, #{offday}, #{scale}, #{spaceaddr1}, #{spaceaddr2}, #{latitude}, #{longitude})
	</if>
	</insert>
	
	<select id="listUserBoard" parameterType="Member" resultType="Board">
	SELECT
	BOARDNUM, ID, TITLE, IMAGE, TO_CHAR(INDATE,'YYYY-MM-DD') AS INDATE, MEMBERTYPE, KEYWORD, COMMENTS, PRECAUTION, NAME, TYPE1, TYPE2, TYPE3, PRICE, STOCK, OPTIME, OFFDAY, SCALE, SPACEADDR1, SPACEADDR2, LATITUDE, LONGITUDE, RECOMMEND
	FROM WOW_BOARD
	WHERE ID=#{id}
	ORDER BY BOARDNUM DESC
	</select>
	
	<select id="listBoard" parameterType="String" resultType="Board">
	SELECT
	BOARDNUM, ID, TITLE, IMAGE, TO_CHAR(INDATE,'YYYY-MM-DD') AS INDATE, MEMBERTYPE, KEYWORD, COMMENTS, PRECAUTION, NAME, TYPE1, TYPE2, TYPE3, PRICE, STOCK, OPTIME, OFFDAY, SCALE, SPACEADDR1, SPACEADDR2, LATITUDE, LONGITUDE, RECOMMEND
	FROM WOW_BOARD
	WHERE MEMBERTYPE=#{membertype}
	ORDER BY BOARDNUM DESC
	</select>
</mapper>
